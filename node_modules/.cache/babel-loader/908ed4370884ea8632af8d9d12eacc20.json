{"ast":null,"code":"var _jsxFileName = \"/Users/onademuytere/Documents/GitHub/wot-herexamen/src/pages/waterpage/waterpage.component.jsx\";\nimport React from 'react';\nimport './waterpage.styles.scss';\nimport { Link } from 'react-router-dom';\nimport firebase from '../../firebase';\n\nclass Waterpage extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.bijvullen = e => {\n      e.preventDefault();\n      const db = firebase.firestore();\n      var currentDate = new Date();\n\n      if (this.state.bijvullen === false) {\n        this.setState({\n          stopzetten: false\n        });\n        this.setState({\n          bijvullen: true\n        });\n        db.collection(\"watertoevoer\").add({\n          aan: true,\n          datum: currentDate,\n          manier: \"manueel\"\n        });\n        db.collection(\"boodschap\").doc(\"sQNGeSuqvrAWHEMQVKx6\").set({\n          manueleAanvraag: true,\n          manueleStop: false\n        });\n      } else {\n        this.setState({\n          bijvullen: false\n        });\n        db.collection(\"boodschap\").doc(\"sQNGeSuqvrAWHEMQVKx6\").update({\n          manueleStop: false,\n          manueleAanvraag: false\n        });\n      }\n    };\n\n    this.stopzetten = e => {\n      e.preventDefault();\n      const db = firebase.firestore();\n\n      if (this.state.stopzetten) {\n        this.setState({\n          stopzetten: false\n        });\n        this.setState({\n          bijvullen: false\n        });\n        db.collection(\"boodschap\").doc(\"sQNGeSuqvrAWHEMQVKx6\").update({\n          manueleStop: false\n        });\n      } else {\n        this.setState({\n          stopzetten: true\n        });\n        this.setState({\n          bijvullen: false\n        });\n        db.collection(\"boodschap\").doc(\"sQNGeSuqvrAWHEMQVKx6\").update({\n          manueleStop: true,\n          manueleAanvraag: false\n        });\n      }\n    };\n\n    this.state = {\n      filling: false,\n      status: \"\",\n      lastone: \"\",\n      items: [],\n      stopzetten: null,\n      bijvullen: null,\n      boodschappen: []\n    };\n    this.bijvullen = this.bijvullen.bind(this);\n    this.stopzetten = this.stopzetten.bind(this);\n  }\n\n  componentDidMount() {\n    var items = [];\n    firebase.firestore().collection(\"watertoevoer\").orderBy(\"datum\", \"desc\").limit(1).get().then(querySnapshot => {\n      //Notice the arrow funtion which bind `this` automatically.\n      querySnapshot.forEach(function (doc) {\n        items.push(doc.data());\n      });\n      this.setState({\n        items: items\n      }); //set data in state here\n    });\n    var boodschappen = [];\n    firebase.firestore().collection(\"boodschap\").get().then(querySnapshot => {\n      //Notice the arrow funtion which bind `this` automatically.\n      querySnapshot.forEach(function (doc) {\n        boodschappen.push(doc.data());\n      });\n      this.setState({\n        boodschappen: boodschappen\n      });\n      this.setState({\n        stopzetten: this.state.boodschappen[0].manueleStop\n      });\n      this.setState({\n        bijvullen: this.state.boodschappen[0].manueleAanvraag\n      }); //set data in state here\n    });\n  }\n\n  render() {\n    const {\n      status,\n      items\n    } = this.state;\n    console.log(this.state);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"waterpage\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"pagetitle\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }\n    }, \"WATERTOEVOER\", /*#__PURE__*/React.createElement(\"br\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 56\n      }\n    }), status), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"back\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 39\n      }\n    }, \"Ga terug\")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.bijvullen,\n      className: this.state.bijvullen ? \"bijvulling aan\" : \"bijvulling uit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 21\n      }\n    }, this.state.bijvullen === true ? /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"manueel oranje\",\n      value: \"MANUEEL BIJVULLEN\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 33\n      }\n    }) : this.state.bijvullen === false ? /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"manueel randje\",\n      value: \"MANUEEL BIJVULLEN\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 33\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"titlebig\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 120,\n        columnNumber: 29\n      }\n    }, \"loading\")), /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.stopzetten,\n      className: this.state.stopzetten ? \"stopzetting aan\" : \"stopzetting uit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }\n    }, this.state.stopzetten === false ? /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"stopzetten groen\",\n      value: \"SYSTEEM AUTOMATISCH\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 33\n      }\n    }) : this.state.stopzetten === true ? /*#__PURE__*/React.createElement(\"input\", {\n      type: \"submit\",\n      className: \"stopzetten rood\",\n      value: \"SYSTEEM STOPGEZET\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 37\n      }\n    }) : /*#__PURE__*/React.createElement(\"div\", {\n      className: \"titlebig\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 29\n      }\n    }, \"loading\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tussentitel\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 137,\n        columnNumber: 21\n      }\n    }, \"Laatste bijvulling\"), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tablesettings\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 21\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 139,\n        columnNumber: 25\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 29\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 33\n      }\n    }, \"Datum\"), /*#__PURE__*/React.createElement(\"th\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 33\n      }\n    }, \"Wijze\")), items && items.length > 0 && items.map(item => /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 147,\n        columnNumber: 33\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 148,\n        columnNumber: 37\n      }\n    }, JSON.stringify(item.datum.toDate().getDate()), \"/\", JSON.stringify(item.datum.toDate().getMonth()), \"/\", JSON.stringify(item.datum.toDate().getFullYear()), \" \", JSON.stringify(item.datum.toDate().getHours()).padStart(2, \"0\"), \":\", JSON.stringify(item.datum.toDate().getMinutes()).padStart(2, \"0\")), /*#__PURE__*/React.createElement(\"td\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 149,\n        columnNumber: 37\n      }\n    }, item.manier))))), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"geschiedenis\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 17\n      }\n    }, /*#__PURE__*/React.createElement(Link, {\n      to: \"/geschiedenis\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 155,\n        columnNumber: 47\n      }\n    }, \"GESCHIEDENIS\")));\n  }\n\n}\n\nexport default Waterpage;","map":{"version":3,"sources":["/Users/onademuytere/Documents/GitHub/wot-herexamen/src/pages/waterpage/waterpage.component.jsx"],"names":["React","Link","firebase","Waterpage","Component","constructor","props","bijvullen","e","preventDefault","db","firestore","currentDate","Date","state","setState","stopzetten","collection","add","aan","datum","manier","doc","set","manueleAanvraag","manueleStop","update","filling","status","lastone","items","boodschappen","bind","componentDidMount","orderBy","limit","get","then","querySnapshot","forEach","push","data","render","console","log","length","map","item","JSON","stringify","toDate","getDate","getMonth","getFullYear","getHours","padStart","getMinutes"],"mappings":"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","sourcesContent":["import React from 'react';\nimport './waterpage.styles.scss';\nimport { Link } from 'react-router-dom';\nimport firebase from '../../firebase';\n\n\nclass Waterpage extends React.Component {\n    constructor(props){\n        super(props);\n        this.state = {\n            filling: false,\n            status: \"\",\n            lastone: \"\",\n            items: [],\n            stopzetten: null,\n            bijvullen: null,\n            boodschappen: [],\n        }\n        \n        this.bijvullen = this.bijvullen.bind(this);\n        this.stopzetten = this.stopzetten.bind(this);\n    }\n\n    componentDidMount() {\n        var items = [];\n        firebase\n        .firestore()\n        .collection(\"watertoevoer\").orderBy(\"datum\", \"desc\").limit(1)\n        .get()\n        .then((querySnapshot) => {  //Notice the arrow funtion which bind `this` automatically.\n            querySnapshot.forEach(function(doc) {\n                items.push(doc.data());\n            });\n            this.setState({ items: items });   //set data in state here\n        });\n\n        var boodschappen = [];\n        firebase\n        .firestore()\n        .collection(\"boodschap\")\n        .get()\n        .then((querySnapshot) => {  //Notice the arrow funtion which bind `this` automatically.\n            querySnapshot.forEach(function(doc) {\n                boodschappen.push(doc.data());\n            });\n            this.setState({ boodschappen: boodschappen });  \n            this.setState({stopzetten: this.state.boodschappen[0].manueleStop})\n            this.setState({bijvullen: this.state.boodschappen[0].manueleAanvraag})\n            //set data in state here\n        });\n\n    }\n\n    bijvullen = (e) => {\n        e.preventDefault();\n        const db = firebase.firestore();\n\n        var currentDate = new Date();\n\n        if(this.state.bijvullen === false){\n            this.setState({stopzetten: false});\n            this.setState({bijvullen: true});\n            db.collection(\"watertoevoer\").add(\n                {\n                aan: true,\n                datum: currentDate,\n                manier: \"manueel\",\n            });\n        \n            db.collection(\"boodschap\").doc(\"sQNGeSuqvrAWHEMQVKx6\").set({\n                manueleAanvraag: true,\n                manueleStop: false,\n            })\n        }\n        else{\n            this.setState({bijvullen: false});\n            db.collection(\"boodschap\").doc(\"sQNGeSuqvrAWHEMQVKx6\").update({\n                manueleStop: false,\n                manueleAanvraag: false,\n            });\n        }\n    }\n\n    stopzetten = (e) => {\n        e.preventDefault();\n        const db = firebase.firestore();\n\n        if(this.state.stopzetten){\n            this.setState({stopzetten: false});\n            this.setState({bijvullen: false});\n            db.collection(\"boodschap\").doc(\"sQNGeSuqvrAWHEMQVKx6\").update({\n                manueleStop: false,\n            });\n\n        } else {\n            this.setState({stopzetten: true});\n            this.setState({bijvullen: false});\n            db.collection(\"boodschap\").doc(\"sQNGeSuqvrAWHEMQVKx6\").update({\n                manueleStop: true,\n                manueleAanvraag: false,\n            });\n        }\n    }\n\n    render(){\n        const {status, items} = this.state;\n        console.log(this.state);\n \n        return(\n            <div className='waterpage'>\n                <div className=\"pagetitle\">WATERTOEVOER<br></br>{status}</div>\n                <div className=\"back\"><Link to='/'>Ga terug</Link></div>\n                \n                    <form onSubmit={this.bijvullen} className={this.state.bijvullen ? \"bijvulling aan\" : \"bijvulling uit\"}>\n                            {this.state.bijvullen === true ?\n                                <input type=\"submit\" className=\"manueel oranje\" value=\"MANUEEL BIJVULLEN\"/>\n                            :  this.state.bijvullen === false ?\n                                <input type=\"submit\" className=\"manueel randje\" value=\"MANUEEL BIJVULLEN\"/>\n                            :\n                            <div className=\"titlebig\">loading</div>\n                            }\n\n\n                    </form>\n\n                    <form onSubmit={this.stopzetten} className={this.state.stopzetten ? \"stopzetting aan\" : \"stopzetting uit\"}>\n                            {this.state.stopzetten === false ?\n                                <input type=\"submit\" className=\"stopzetten groen\" value=\"SYSTEEM AUTOMATISCH\"/>\n                            :  this.state.stopzetten === true ?\n                                    <input type=\"submit\" className=\"stopzetten rood\" value=\"SYSTEEM STOPGEZET\"/>\n                            :\n                            <div className=\"titlebig\">loading</div>\n                            }\n                            \n                    </form>\n\n                    <div className=\"tussentitel\">Laatste bijvulling</div>\n                    <div className=\"tablesettings\">\n                        <table>\n                            <tr>\n                                <th>Datum</th>\n                                <th>Wijze</th>\n\n                            </tr>\n\n                            {items && items.length > 0 && items.map(item => (\n                                <tr>\n                                    <td>{JSON.stringify(item.datum.toDate().getDate())}/{JSON.stringify(item.datum.toDate().getMonth())}/{JSON.stringify(item.datum.toDate().getFullYear())} {JSON.stringify(item.datum.toDate().getHours()).padStart(2, \"0\")}:{JSON.stringify(item.datum.toDate().getMinutes()).padStart(2, \"0\")}</td>\n                                    <td>{item.manier}</td>\n\n                                </tr>\n                            ))}\n                        </table>\n                    </div>\n                <div className=\"geschiedenis\"><Link to='/geschiedenis'>GESCHIEDENIS</Link></div>\n\n\n            </div> \n        );\n    }\n}\n\nexport default Waterpage;"]},"metadata":{},"sourceType":"module"}